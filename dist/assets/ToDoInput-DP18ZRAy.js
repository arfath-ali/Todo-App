import{d as b,e as w,b as D,r as U,j as d,f as v}from"./index-vE5ErLFs.js";const n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));function j(e,t=0){return(n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]).toLowerCase()}let i;const k=new Uint8Array(16);function I(){if(!i){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");i=crypto.getRandomValues.bind(crypto)}return i(k)}const T=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),x={randomUUID:T};function f(e,t,l){var r;if(x.randomUUID&&!e)return x.randomUUID();e=e||{};const o=e.random??((r=e.rng)==null?void 0:r.call(e))??I();if(o.length<16)throw new Error("Random bytes length must be >= 16");return o[6]=o[6]&15|64,o[8]=o[8]&63|128,j(o)}const R=({windowWidth:e})=>{const{allToDos:t,setUpdatedToDos:l}=b(),{currentPath:o}=w(),{userProfile:r,isSignedIn:g,isUserProfileLoading:C}=D(),u=r==null?void 0:r.email,[s,p]=U.useState(""),y=a=>{p(a.target.value)},m=async()=>{if(!g){alert("Please sign in to add a ToDo.");return}if(s.trim()==="")return;const a={toDoId:f(),toDo:s,isChecked:!1,createdAt:Date.now()};l(c=>[...c,a]);const h=JSON.stringify({email:u,newToDo:a,index:t.length});v.post("/api/create-todo-list",{email:u,newToDo:a,index:t.length}).catch(()=>{if(navigator.sendBeacon){const c=new Blob([h],{type:"application/json"});navigator.sendBeacon("/api/create-todo-list",c)}}),p("")};return d.jsxs("div",{className:`bg-white dark:bg-gray-900 ${o==="all"?"flex":"hidden"} ${e<375?"flex-col items-end justify-center gap-2":"flex-row items-center justify-between"} app-text-medium rounded-[5px] px-5 py-[0.875rem]`,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"desktop:h-6 desktop:w-6 box-border h-5 w-5 rounded-full border-1 border-gray-300 dark:border-gray-700"}),d.jsx("input",{type:"text",placeholder:"Create a new todo...",className:"w-[12.5rem] max-w-[12.5rem] outline-none placeholder:text-black placeholder:opacity-40 hover:cursor-pointer dark:placeholder:text-gray-400",onChange:y,onKeyDown:a=>{a.key==="Enter"&&m()},value:s})]}),d.jsx("button",{className:"button-gradient rounded-[5px] p-1 font-bold hover:cursor-pointer dark:text-black",onClick:()=>m(),children:"Create"})]})};export{R as default};
