import{d as b,e as I,b as w,r as T,j as s,f as v}from"./index-CepctDMo.js";const n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));function U(e,t=0){return(n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]).toLowerCase()}let i;const j=new Uint8Array(16);function k(){if(!i){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");i=crypto.getRandomValues.bind(crypto)}return i(j)}const C=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),g={randomUUID:C};function D(e,t,c){var r;if(g.randomUUID&&!e)return g.randomUUID();e=e||{};const d=e.random??((r=e.rng)==null?void 0:r.call(e))??k();if(d.length<16)throw new Error("Random bytes length must be >= 16");return d[6]=d[6]&15|64,d[8]=d[8]&63|128,U(d)}const N=({windowWidth:e})=>{const{setTodoOrder:t,setTodos:c}=b(),{currentPath:d}=I(),{userProfile:r,isSignedIn:x}=w(),u=r==null?void 0:r.email,[l,p]=T.useState(""),y=o=>{p(o.target.value)},m=async()=>{if(!x){alert("Please sign in to add a Todo.");return}if(l.trim()==="")return;const o={todoId:D(),todo:l,isChecked:!1,createdAt:Date.now(),toggledIndexInActiveList:null,toggledIndexInCompletedList:null,toggledTimeInActiveList:null,toggledTimeInCompletedList:null};t(a=>({...a,allTodos:[...a.allTodos||[],o.todoId],activeTodos:[...a.activeTodos||[],o.todoId]})),c(a=>[...a||[],o]);const h=JSON.stringify({email:u,newTodo:o});v.post("/api/create-todo-list",{email:u,newTodo:o}).catch(()=>{if(navigator.sendBeacon){const a=new Blob([h],{type:"application/json"});navigator.sendBeacon("/api/create-todo-list",a)}}),p("")};return s.jsxs("div",{className:`bg-white dark:bg-gray-900 ${d==="all"?"flex":"hidden"} ${e<375?"flex-col items-end justify-center gap-2":"flex-row items-center justify-between"} app-text-medium rounded-[5px] px-5 py-[0.875rem]`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"desktop:h-6 desktop:w-6 box-border h-5 w-5 rounded-full border-1 border-gray-300 dark:border-gray-700"}),s.jsx("input",{type:"text",placeholder:"Create a new todo...",className:"w-[12.5rem] max-w-[12.5rem] outline-none placeholder:text-black placeholder:opacity-40 hover:cursor-pointer dark:placeholder:text-gray-400",onChange:y,onKeyDown:o=>{o.key==="Enter"&&m()},value:l})]}),s.jsx("button",{className:"button-gradient rounded-[5px] p-1 font-bold hover:cursor-pointer dark:text-black",onClick:()=>m(),children:"Create"})]})};export{N as default};
