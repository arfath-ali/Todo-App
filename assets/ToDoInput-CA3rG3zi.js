import{d as w,e as D,b as v,r as U,j as d,f as j}from"./index-BvcNnz4g.js";const n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));function k(e,t=0){return(n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]).toLowerCase()}let l;const I=new Uint8Array(16);function T(){if(!l){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");l=crypto.getRandomValues.bind(crypto)}return l(I)}const f=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),g={randomUUID:f};function C(e,t,u){var s;if(g.randomUUID&&!e)return g.randomUUID();e=e||{};const o=e.random??((s=e.rng)==null?void 0:s.call(e))??T();if(o.length<16)throw new Error("Random bytes length must be >= 16");return o[6]=o[6]&15|64,o[8]=o[8]&63|128,k(o)}const R=({windowWidth:e})=>{const{allToDos:t,setAllToDos:u,setActiveToDos:o}=w(),{currentPath:s}=D(),{userProfile:c,isSignedIn:y}=v(),p=c==null?void 0:c.email,[i,m]=U.useState(""),h=a=>{m(a.target.value)},x=async()=>{if(!y){alert("Please sign in to add a ToDo.");return}if(i.trim()==="")return;const a={toDoId:C(),toDo:i,isChecked:!1,createdAt:Date.now()};u(r=>[...r,a]),o(r=>[...r,a]);const b=JSON.stringify({email:p,newToDo:a,index:t.length});j.post("/api/create-todo-list",{email:p,newToDo:a,index:t.length}).catch(()=>{if(navigator.sendBeacon){const r=new Blob([b],{type:"application/json"});navigator.sendBeacon("/api/create-todo-list",r)}}),m("")};return d.jsxs("div",{className:`bg-white dark:bg-gray-900 ${s==="all"?"flex":"hidden"} ${e<375?"flex-col items-end justify-center gap-2":"flex-row items-center justify-between"} app-text-medium rounded-[5px] px-5 py-[0.875rem]`,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"desktop:h-6 desktop:w-6 box-border h-5 w-5 rounded-full border-1 border-gray-300 dark:border-gray-700"}),d.jsx("input",{type:"text",placeholder:"Create a new todo...",className:"w-[12.5rem] max-w-[12.5rem] outline-none placeholder:text-black placeholder:opacity-40 hover:cursor-pointer dark:placeholder:text-gray-400",onChange:h,onKeyDown:a=>{a.key==="Enter"&&x()},value:i})]}),d.jsx("button",{className:"button-gradient rounded-[5px] p-1 font-bold hover:cursor-pointer dark:text-black",onClick:()=>x(),children:"Create"})]})};export{R as default};
